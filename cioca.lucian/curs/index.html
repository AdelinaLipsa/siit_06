<html>

<head>
    <script>
        
        
        function cursValutar() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4) {
                    if (this.status == 200) {
                        var apilink = JSON.parse(this.responseText);
                        var rates = apilink.rates;
                        var ul = document.getElementById("myList");
                        var valute = '';
                        
                        var date = apilink.date.toString();
                        var day = date.slice(8,10);
                        var moon = date.slice(5,7)
                        var year = date.slice(0,4);
                        var newDate = day+'/'+moon+'/'+year;
                        document.getElementById("date").innerHTML = newDate;
                        
                        var dataIeri = new Date().getTime() - 86400000;
                        dataIeri = new Date(dataIeri);
                        console.log(dataIeri);

                        

                        if((dataIeri.getMonth()+1) < 10){
                            var datax = dataIeri.getFullYear()+"-"+"0"+(dataIeri.getMonth()+1)+"-"+dataIeri.getDate();
                        }else{
                            var datax = dataIeri.getFullYear()+"-"+(dataIeri.getMonth()+1)+"-"+dataIeri.getDate();
                        }

                        
                        console.log(datax);

                        
                        for (let i in rates) {
                            var value = `<li>${i} = ${rates[i]}</li>`
                            valute += value;
                        }
                        ul.innerHTML = valute;
                    } else {
                        alert("a crapat");
                    }
                }
            };
            xhttp.open("GET", "http://data.fixer.io/api/latest?access_key=bab6dc180ed5d2d17a7bd00df96ba187", true);
            xhttp.send();
        }
        function cursValutarIeri() {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState === 4) {
                    if (this.status == 200) {
                        var apilink = JSON.parse(this.responseText);
                        var rates = apilink.rates;
                        var ul = document.getElementById("myList");
                        
                        
                        var date = apilink.date.toString();
                        var day = date.slice(8,10);
                        var moon = date.slice(5,7)
                        var year = date.slice(0,4);
                        var newDate = day+'/'+moon+'/'+year;
                        document.getElementById("date").innerHTML = newDate;
                        
                        var dataIeri = new Date().getTime() - 86400000;
                        dataIeri = new Date(dataIeri);
                        console.log(dataIeri);

                        

                        if((dataIeri.getMonth()+1) < 10){
                            var datax = dataIeri.getFullYear()+"-"+"0"+(dataIeri.getMonth()+1)+"-"+dataIeri.getDate();
                        }else{
                            var datax = dataIeri.getFullYear()+"-"+(dataIeri.getMonth()+1)+"-"+dataIeri.getDate();
                        }

                        
                        console.log(datax);

                        
                        for (let i in rates) {
                            var value = `<li>${i} = ${rates[i]}</li>`
                            valute += value;
                        }
                        ul.innerHTML = valute;
                    } else {
                        alert("a crapat");
                    }
                }
            };
            xhttp.open("GET", "http://data.fixer.io/api/latest?access_key=bab6dc180ed5d2d17a7bd00df96ba187", true);
            xhttp.send();
        }

        function draw(){
            var valute = '';
            for (let i in rates) {
                            var value = `<li>${i} = ${rates[i]}</li>`
                            valute += value;
                        }
                        ul.innerHTML = valute;
            
        }
    </script>
</head>

<body onload="cursValutar();">
    
    <div class="container">
        <h1>Curs valutar in data de <span id="date"></span></h1>
        <ul id="myList">
            <li></li>
        </ul>
    </div>
</body>
    <div class="container">
        <h1>Curs valutar in data de <span id=""></span></h1>
        <ul id="myList">
            <li></li>
        </ul>
    </div>
</body>

</html>